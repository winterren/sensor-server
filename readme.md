ä»¥ä¸‹æ˜¯æ›´æ–°åçš„ **å®Œæ•´æ¥å£æ–‡æ¡£ï¼ˆMarkdown æ ¼å¼ï¼‰**ï¼Œæ¶µç›–ä½ å½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰å·²å®ç°çš„æ¥å£ï¼ŒåŒ…æ‹¬å†å²æŸ¥è¯¢ã€æ€»è®°å½•æ•°ã€é˜ˆå€¼è·å–ç­‰å†…å®¹ã€‚

http://43.138.15.118:5000

---

# ğŸ“¡ ä¼ æ„Ÿå™¨æ•°æ® API æ–‡æ¡£

æ‰€æœ‰æ¥å£åŸºäºï¼š`http://localhost:5000`

---

## ğŸ“‹ æ¥å£æ€»è§ˆ

| æ–¹æ³•  | è·¯å¾„                        | æè¿°                    |
| --- | ------------------------- | --------------------- |
| GET | `/`                       | æ¥å£æ¬¢è¿ä¿¡æ¯                |
| GET | `/api/latest`             | è·å–æœ€æ–°ä¼ æ„Ÿå™¨æ•°æ®             |
| GET | `/api/history`            | è·å–å†å²ä¼ æ„Ÿå™¨æ•°æ®ï¼ˆæ”¯æŒç­›é€‰ã€æ’åºã€åˆ†é¡µï¼‰ |
| GET | `/api/history/count`      | è·å–ä¼ æ„Ÿå™¨å†å²è®°å½•æ€»æ•°           |
| GET | `/api/warning-thresholds` | è·å–å„ä¼ æ„Ÿå™¨æŠ¥è­¦é˜ˆå€¼ï¼ˆçº¯æ•°å­—ï¼‰       |

---

## 1. `GET /`

### æè¿°ï¼š

è¿”å›æ¬¢è¿ä¿¡æ¯ï¼Œç”¨äºæµ‹è¯•æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚

---

## 2. `GET /api/latest`

### æè¿°ï¼š

è·å–ç³»ç»Ÿä¸­æœ€æ–°ä¸€æ¡ä¼ æ„Ÿå™¨æ•°æ®ã€‚

### å“åº”ç¤ºä¾‹ï¼š

```json
{
  "timestamp": "2025-06-30T01:23:45.000Z",
  "index_no": 1,
  "voltage1": 5020,
  "voltage2": 5080,
  "temperature": 25.36,
  "O2": 20.91,
  "CO": 0.12,
  "C2H2": 0.03,
  "CH4": 1.23,
  "C2H6": 0.45,
  "CO2": 0.78
}
```

---

## 3. `GET /api/history`

### æè¿°ï¼š

æŸ¥è¯¢ä¼ æ„Ÿå™¨å†å²æ•°æ®ï¼Œæ”¯æŒå¤šå‚æ•°è¿‡æ»¤ã€æ’åºå’Œåˆ†é¡µã€‚

### æ”¯æŒå‚æ•°ï¼ˆQueryï¼‰ï¼š

| å‚æ•°å           | ç±»å‹     | è¯´æ˜                        |
| ------------- | ------ | ------------------------- |
| `page`        | number | é¡µç ï¼ˆé»˜è®¤ 1ï¼‰                  |
| `limit`       | number | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤ 10ï¼‰               |
| `sort`        | string | æ’åºå­—æ®µåï¼ˆé»˜è®¤ `timestamp`ï¼‰     |
| `order`       | string | `asc` æˆ– `desc`ï¼ˆé»˜è®¤ `desc`ï¼‰ |
| `index_no`    | number | è¿‡æ»¤ï¼šç‚¹ä½ç¼–å·                   |
| `start`       | string | å¼€å§‹æ—¶é—´ï¼ˆISO 8601ï¼‰            |
| `end`         | string | ç»“æŸæ—¶é—´ï¼ˆISO 8601ï¼‰            |
| `<field>_min` | number | æŒ‡å®šå­—æ®µçš„æœ€å°å€¼                  |
| `<field>_max` | number | æŒ‡å®šå­—æ®µçš„æœ€å¤§å€¼                  |
| `<field>_eq`  | number | æŒ‡å®šå­—æ®µçš„ç²¾ç¡®å€¼                  |

> æ”¯æŒçš„ `<field>` åŒ…æ‹¬ï¼š
> `voltage1`, `voltage2`, `temperature`, `O2`, `CO`, `C2H2`, `CH4`, `C2H6`, `CO2`

### ç¤ºä¾‹è¯·æ±‚ï¼š

```
GET /api/history?page=1&limit=5&temperature_min=25&CO_max=0.5&sort=temperature&order=asc
```

### å“åº”ç¤ºä¾‹ï¼š

```json
[
  {
    "timestamp": "2025-06-30T01:15:22.123Z",
    "index_no": 2,
    "voltage1": 5022,
    "voltage2": 5082,
    "temperature": 25.12,
    "O2": 20.95,
    "CO": 0.10,
    "C2H2": 0.02,
    "CH4": 1.00,
    "C2H6": 0.42,
    "CO2": 0.75
  }
]
```

---

## 4. `GET /api/history/count`

### æè¿°ï¼š

è¿”å›æ•°æ®åº“ä¸­å†å²ä¼ æ„Ÿå™¨æ•°æ®çš„æ€»æ¡æ•°ã€‚

### å“åº”ç¤ºä¾‹ï¼š

```json
{
  "count": 1335
}
```

---

## 5. `GET /api/warning-thresholds`

### æè¿°ï¼š

è¿”å›ç³»ç»Ÿä¸­å„ä¼ æ„Ÿå™¨æŠ¥è­¦é˜ˆå€¼ï¼ˆå•ä½ç•¥å»ï¼Œä»…ä¸ºæ•°å€¼ï¼‰ã€‚

### å“åº”ç¤ºä¾‹ï¼š

```json
{
  "CO":        { "warn": 24, "level1": 50, "level2": 100 },
  "CO2":       { "warn": 1, "level1": 3, "level2": 5 },
  "C2H2":      { "warn": 2, "level1": 5, "level2": 10 },
  "O2": {
    "warn_low": 19.5, "level1_low": 18, "level2_low": 15,
    "warn_high": 23.5, "level1_high": 25, "level2_high": 27
  },
  "C2H6":      { "warn": 5, "level1": 10, "level2": 20 },
  "CH4":       { "warn": 0.8, "level1": 1.0, "level2": 2.5 },
  "temperature": { "warn": 30, "level1": 40, "level2": 60 }
}
```

---

## â± æ—¶é—´è¯´æ˜

* æ‰€æœ‰ `timestamp` å­—æ®µå‡ä¸ºæ ¼å¼`2025-06-30 09:23:45`

---

æ•´ç†å¦‚ä¸‹ï¼Œç»§ç»­å»¶ç»­ä½ æä¾›çš„æ¥å£æ–‡æ¡£é£æ ¼ï¼š

---

## 6. `GET /api/warning-history`

### æè¿°ï¼š

æ ¹æ®å†å²ä¼ æ„Ÿå™¨æ•°æ®å’Œç³»ç»Ÿä¸­é…ç½®çš„æŠ¥è­¦é˜ˆå€¼ï¼Œè¿”å›è§¦å‘æŠ¥è­¦çš„è®°å½•æ•°æ®ã€‚æŠ¥è­¦ç­‰çº§ç»Ÿä¸€ä¸º `warn`ã€`level1`ã€`level2`ï¼Œä¸å†åŒºåˆ† `_low` / `_high`ã€‚æ”¯æŒæŒ‰ç±»å‹ã€ç­‰çº§ç­›é€‰ï¼Œæ”¯æŒåˆ†é¡µå’Œæ—¶é—´æ’åºã€‚

### è¯·æ±‚å‚æ•°ï¼š

| å‚æ•°å     | ç±»å‹     | æ˜¯å¦å¯é€‰ | é»˜è®¤å€¼         | è¯´æ˜                            |
| ------- | ------ | ---- | ----------- | ----------------------------- |
| `type`  | string | æ˜¯    | æ—            | ä¼ æ„Ÿå™¨ç±»å‹ï¼Œå¦‚ `CO`, `CH4`ï¼Œä¸ºç©ºåˆ™è¿”å›æ‰€æœ‰ç±»å‹ |
| `level` | string | æ˜¯    | æ—            | æŠ¥è­¦ç­‰çº§ï¼š`warn`ã€`level1`ã€`level2` |
| `limit` | number | æ˜¯    | 10          | æ¯é¡µæ¡æ•°                          |
| `page`  | number | æ˜¯    | 1           | å½“å‰é¡µç                           |
| `sort`  | string | æ˜¯    | `timestamp` | ç›®å‰ä»…æ”¯æŒæ—¶é—´æ’åº                     |
| `order` | string | æ˜¯    | `desc`      | æ’åºæ–¹å¼ï¼š`asc` / `desc`           |

### å“åº”ç¤ºä¾‹ï¼š

```json
{
  "total": 3,
  "page": 1,
  "pageSize": 10,
  "data": [
    {
      "type": "CO",
      "value": 65.2,
      "level": "level1",
      "timestamp": "2025-06-30 09:23:45",
      "index_no": 3
    },
    {
      "type": "O2",
      "value": 14.9,
      "level": "level2",
      "timestamp": "2025-06-30 09:20:11",
      "index_no": 3
    },
    {
      "type": "temperature",
      "value": 61.5,
      "level": "level2",
      "timestamp": "2025-06-30 08:50:02",
      "index_no": 1
    }
  ]
}
```

---

## â± æ—¶é—´è¯´æ˜

* æ‰€æœ‰ `timestamp` å­—æ®µå‡ä¸ºæ ¼å¼ï¼š`2025-06-30 09:23:45`
* è‹¥éœ€å…¶ä»–æ ¼å¼ï¼Œå¯åœ¨å‰ç«¯ä½¿ç”¨æ ¼å¼åŒ–å·¥å…·ï¼ˆå¦‚ `dayjs`, `moment.js`ï¼‰å¤„ç†

