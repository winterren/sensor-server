ä»¥ä¸‹æ˜¯ä½ è¯·æ±‚çš„æ›´æ–°åçš„ **å®Œæ•´æ¥å£æ–‡æ¡£**ï¼ˆMarkdown æ ¼å¼ï¼‰ï¼Œç»Ÿä¸€è¡¥å……äº†åˆ†é¡µè¿”å›çš„å­—æ®µï¼š`total`ã€`page`ã€`pageSize`ã€`totalPages`ï¼Œå¹¶è¡¥å……äº† `/api/warning-history` ä¸­å¯¹ `index_no` çš„ç­›é€‰æ”¯æŒã€‚

---

# ğŸ“¡ ä¼ æ„Ÿå™¨æ•°æ® API æ–‡æ¡£ï¼ˆæ›´æ–°ç‰ˆï¼‰

æ‰€æœ‰æ¥å£åŸºäºåœ°å€ï¼š

```
http://localhost:5000
```

---

## ğŸ“‹ æ¥å£æ€»è§ˆ

| æ–¹æ³•  | è·¯å¾„                        | æè¿°                    |
| --- | ------------------------- | --------------------- |
| GET | `/`                       | æ¥å£æ¬¢è¿ä¿¡æ¯                |
| GET | `/api/latest`             | è·å–æœ€æ–°ä¼ æ„Ÿå™¨æ•°æ®ï¼ˆæ”¯æŒåˆ†é¡µï¼‰       |
| GET | `/api/history`            | è·å–å†å²ä¼ æ„Ÿå™¨æ•°æ®ï¼ˆæ”¯æŒç­›é€‰ã€æ’åºã€åˆ†é¡µï¼‰ |
| GET | `/api/history/count`      | è·å–ä¼ æ„Ÿå™¨å†å²è®°å½•æ€»æ¡æ•°          |
| GET | `/api/warning-thresholds` | è·å–å„ä¼ æ„Ÿå™¨æŠ¥è­¦é˜ˆå€¼ï¼ˆçº¯æ•°å­—ï¼‰       |
| GET | `/api/warning-history`    | è·å–æŠ¥è­¦è®°å½•ï¼ˆåŸºäºé˜ˆå€¼åŠ¨æ€åˆ†æï¼Œæ”¯æŒç­›é€‰ï¼‰ |

---

## 1. `GET /`

### æè¿°ï¼š

è¿”å›æ¬¢è¿ä¿¡æ¯ï¼Œç¡®è®¤ API æœåŠ¡æ­£å¸¸è¿è¡Œã€‚

---
æ›´æ–°åçš„ **`GET /api/latest`** æ¥å£æ–‡æ¡£å¦‚ä¸‹ï¼š

---

## 2. `GET /api/latest`

### æè¿°ï¼š

è·å–æ¯ä¸ª `index_no` ç‚¹ä½çš„æœ€æ–°ä¼ æ„Ÿå™¨æ•°æ®ã€‚æ”¯æŒåˆ†é¡µå‚æ•°ï¼ˆé»˜è®¤è¿”å›ç¬¬ä¸€é¡µçš„å‰ 10 ä¸ªç‚¹ä½æ•°æ®ï¼‰ã€‚

æ¯ä¸ªç‚¹ä½ä»…è¿”å›æ•°æ®åº“ä¸­æ—¶é—´æœ€æ–°çš„ä¸€æ¡è®°å½•ï¼Œå­—æ®µåŒ…æ‹¬æ¸©åº¦ã€æ°§æ°”ã€å¯ç‡ƒæ°”ä½“ç­‰æ ¸å¿ƒæŒ‡æ ‡ã€‚

---

### è¯·æ±‚å‚æ•°ï¼š

| å‚æ•°å     | ç±»å‹     | æ˜¯å¦å¯é€‰ | é»˜è®¤å€¼ | æè¿°        |
| ------- | ------ | ---- | --- | --------- |
| `page`  | number | æ˜¯    | 1   | å½“å‰é¡µç       |
| `limit` | number | æ˜¯    | 10  | æ¯é¡µæ¡æ•°ï¼ˆç‚¹ä½æ•°ï¼‰ |

---

### è¿”å›å­—æ®µè¯´æ˜ï¼š

æ¯æ¡æ•°æ®åŒ…æ‹¬ä»¥ä¸‹å­—æ®µï¼š

* `index_no`ï¼šè®¾å¤‡ç‚¹ä½ç¼–å·
* `timestamp`ï¼šè¯¥è®°å½•çš„æ—¶é—´
* `temperature`ï¼šæ¸©åº¦ï¼ˆâ„ƒï¼‰
* `O2`ï¼šæ°§æ°”æµ“åº¦ï¼ˆ%ï¼‰
* `CO`ï¼šä¸€æ°§åŒ–ç¢³æµ“åº¦ï¼ˆppmï¼‰
* `C2H2`ï¼šä¹™ç‚”æµ“åº¦ï¼ˆppmï¼‰
* `CH4`ï¼šç”²çƒ·æµ“åº¦ï¼ˆ%ï¼‰
* `C2H6`ï¼šä¹™çƒ·æµ“åº¦ï¼ˆppmï¼‰
* `CO2`ï¼šäºŒæ°§åŒ–ç¢³æµ“åº¦ï¼ˆ%ï¼‰

---

### å“åº”ç¤ºä¾‹ï¼š

```json
{
  "total": 36,
  "page": 1,
  "pageSize": 10,
  "totalPages": 4,
  "data": [
    {
      "timestamp": "2025-07-01 12:00:01",
      "index_no": 1,
      "temperature": 25.36,
      "O2": 20.91,
      "CO": 0.12,
      "C2H2": 0.03,
      "CH4": 1.23,
      "C2H6": 0.45,
      "CO2": 0.78
    },
    {
      "timestamp": "2025-07-01 12:00:05",
      "index_no": 2,
      "temperature": 26.02,
      "O2": 20.75,
      "CO": 0.10,
      "C2H2": 0.04,
      "CH4": 1.10,
      "C2H6": 0.50,
      "CO2": 0.72
    }
    // ... å…¶ä½™ç‚¹ä½
  ]
}
```

---

### æ³¨æ„äº‹é¡¹ï¼š

* æ¯ä¸ª `index_no` åªè¿”å›æ—¶é—´æœ€æ–°çš„ä¸€æ¡æ•°æ®ã€‚
* å»ºè®®ä½¿ç”¨åˆ†é¡µåŠ è½½æ‰€æœ‰ç‚¹ä½ï¼Œé˜²æ­¢ä¸€æ¬¡æ€§æ‹‰å–è¿‡å¤šæ•°æ®å¯¼è‡´å“åº”ç¼“æ…¢ã€‚
* è‹¥è¦è·å–æŸä¸ªå…·ä½“ç‚¹ä½çš„æœ€æ–°æ•°æ®ï¼Œè¯·ä½¿ç”¨ `/api/history?index_no=xxx&limit=1&sort=timestamp&order=desc`ã€‚

---

å¦‚éœ€ï¼Œæˆ‘è¿˜å¯ä»¥æ›´æ–°æ•°æ®åº“åˆ†é¡µæŸ¥è¯¢é€»è¾‘æˆ–ä¼˜åŒ–åˆ†é¡µæŸ¥è¯¢æ€§èƒ½ã€‚æ˜¯å¦éœ€è¦ä¸€å¹¶å®ç°ï¼Ÿ


```

---

## 3. `GET /api/history`

### æè¿°ï¼š

æŸ¥è¯¢å†å²ä¼ æ„Ÿå™¨æ•°æ®ï¼Œæ”¯æŒå¤šç»´ç­›é€‰ã€åˆ†é¡µã€æ’åºã€‚

### è¯·æ±‚å‚æ•°ï¼š

| å‚æ•°å             | ç±»å‹     | è¯´æ˜                              |
| --------------- | ------ | ------------------------------- |
| `page`          | number | é¡µç ï¼ˆé»˜è®¤ 1ï¼‰                        |
| `limit`         | number | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤ 10ï¼‰                     |
| `sort`          | string | æ’åºå­—æ®µåï¼ˆé»˜è®¤ `timestamp`ï¼‰           |
| `order`         | string | `asc` æˆ– `desc`ï¼ˆé»˜è®¤ `desc`ï¼‰       |
| `index_no`      | number | è¿‡æ»¤æŸä¸ª index\_noï¼ˆè®¾å¤‡ç¼–å·ï¼‰            |
| `start` / `end` | string | æ—¶é—´èŒƒå›´ç­›é€‰ï¼ˆå¦‚ï¼š`2025-06-30 00:00:00`ï¼‰ |
| `<field>_min`   | number | å­—æ®µæœ€å°å€¼ç­›é€‰                         |
| `<field>_max`   | number | å­—æ®µæœ€å¤§å€¼ç­›é€‰                         |
| `<field>_eq`    | number | å­—æ®µç­‰äºå€¼ç­›é€‰                         |

> æ”¯æŒç­›é€‰å­—æ®µåŒ…æ‹¬ï¼š
> `voltage1`, `voltage2`, `temperature`, `O2`, `CO`, `C2H2`, `CH4`, `C2H6`, `CO2`

### å“åº”ç¤ºä¾‹ï¼š

```json
{
  "total": 315,
  "page": 1,
  "pageSize": 10,
  "totalPages": 32,
  "data": [
    {
      "timestamp": "2025-06-30 01:15:22",
      "index_no": 2,
      "voltage1": 5022,
      "voltage2": 5082,
      "temperature": 25.12,
      "O2": 20.95,
      "CO": 0.10,
      "C2H2": 0.02,
      "CH4": 1.00,
      "C2H6": 0.42,
      "CO2": 0.75
    }
  ]
}
```

---

## 4. `GET /api/history/count`

### æè¿°ï¼š

è¿”å›æ•°æ®åº“ä¸­å†å²ä¼ æ„Ÿå™¨æ•°æ®æ€»æ¡æ•°ã€‚

### å“åº”ç¤ºä¾‹ï¼š

```json
{
  "count": 1335
}
```

---

## 5. `GET /api/warning-thresholds`

### æè¿°ï¼š

è·å–æ‰€æœ‰ä¼ æ„Ÿå™¨çš„æŠ¥è­¦é˜ˆå€¼è®¾ç½®ã€‚æ ¼å¼ç»Ÿä¸€ä¸ºæ¯ä¸ªä¼ æ„Ÿå™¨å¯¹åº”å¤šä¸ªçº§åˆ«ã€‚

### å“åº”ç¤ºä¾‹ï¼š

```json
{
  "CO":        { "warn": 24, "level1": 50, "level2": 100 },
  "CO2":       { "warn": 1, "level1": 3, "level2": 5 },
  "C2H2":      { "warn": 2, "level1": 5, "level2": 10 },
  "O2": {
    "warn_low": 19.5, "level1_low": 18, "level2_low": 15,
    "warn_high": 23.5, "level1_high": 25, "level2_high": 27
  },
  "C2H6":      { "warn": 5, "level1": 10, "level2": 20 },
  "CH4":       { "warn": 0.8, "level1": 1.0, "level2": 2.5 },
  "temperature": { "warn": 30, "level1": 40, "level2": 60 }
}
```

---

## 6. `GET /api/warning-history`

### æè¿°ï¼š

æ ¹æ®å†å²ä¼ æ„Ÿå™¨æ•°æ®ä¸é˜ˆå€¼åˆ¤æ–­é€»è¾‘ï¼Œè·å–æ‰€æœ‰è§¦å‘ `warn`ã€`level1`ã€`level2` çš„æŠ¥è­¦è®°å½•ã€‚æ¯æ¡å†å²æ•°æ®å¯èƒ½äº§ç”Ÿå¤šæ¡æŠ¥è­¦ã€‚

### è¯·æ±‚å‚æ•°ï¼š

| å‚æ•°å        | ç±»å‹     | é»˜è®¤å€¼         | æ˜¯å¦å¿…å¡« | æè¿°                            |
| ---------- | ------ | ----------- | ---- | ----------------------------- |
| `type`     | string | æ—            | å¦    | ä¼ æ„Ÿå™¨ç±»å‹ï¼Œå¦‚ `CO`, `CH4`           |
| `level`    | string | æ—            | å¦    | æŠ¥è­¦ç­‰çº§ï¼š`warn`ã€`level1`ã€`level2` |
| `index_no` | number | æ—            | å¦    | æŒ‡å®šè®¾å¤‡ç¼–å·ç­›é€‰                      |
| `start`    | string | æ—            | å¦    | èµ·å§‹æ—¶é—´ï¼ˆå¦‚ `2025-06-30 00:00:00`ï¼‰ |
| `end`      | string | æ—            | å¦    | ç»“æŸæ—¶é—´ï¼ˆå¦‚ `2025-06-30 23:59:59`ï¼‰ |
| `page`     | number | 1           | å¦    | é¡µç                             |
| `limit`    | number | 10          | å¦    | æ¯é¡µè®°å½•æ•°                         |
| `sort`     | string | `timestamp` | å¦    | æ’åºå­—æ®µï¼Œé»˜è®¤æŒ‰æ—¶é—´                    |
| `order`    | string | `desc`      | å¦    | æ’åºæ–¹å¼ï¼ˆå‡åºï¼š`asc`ï¼‰                |

### å“åº”ç¤ºä¾‹ï¼š

```json
{
  "total": 3,
  "page": 1,
  "pageSize": 10,
  "totalPages": 1,
  "data": [
    {
      "type": "CO",
      "value": 65.2,
      "level": "level1",
      "timestamp": "2025-06-30 09:23:45",
      "index_no": 3
    },
    {
      "type": "O2",
      "value": 14.9,
      "level": "level2",
      "timestamp": "2025-06-30 09:20:11",
      "index_no": 3
    },
    {
      "type": "temperature",
      "value": 61.5,
      "level": "level2",
      "timestamp": "2025-06-30 08:50:02",
      "index_no": 1
    }
  ]
}
```

---

## â± æ—¶é—´å­—æ®µè¯´æ˜

* æ‰€æœ‰æ—¶é—´å­—æ®µæ ¼å¼ç»Ÿä¸€ä¸ºï¼š`YYYY-MM-DD HH:mm:ss`
* å¯ç›´æ¥ä¼ å…¥æ ‡å‡† ISO å­—ç¬¦ä¸²ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è§£ææˆæ—¶é—´èŒƒå›´
* è‹¥éœ€è¦å…¶ä»–æ ¼å¼ï¼Œå¯åœ¨å‰ç«¯è¿›è¡Œæ ¼å¼åŒ–å¤„ç†ï¼ˆå¦‚ä½¿ç”¨ `dayjs`ã€`moment.js`ï¼‰

---

å¦‚éœ€å°†è¯¥æ–‡æ¡£å¯¼å‡ºä¸º PDF æˆ–è½¬æ¢ä¸º Swagger/OpenAPI 3.0 è§„èŒƒæ–‡æ¡£ï¼Œæˆ‘å¯ä»¥ç»§ç»­å¸®ä½ ç”Ÿæˆã€‚æ˜¯å¦éœ€è¦æˆ‘å¯¼å‡ºä¸€ä»½ï¼Ÿ
